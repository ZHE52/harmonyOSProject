// 英雄卡片列表:
// 1. 赵云   武力值: 99
// 2. 关羽   武力值: 100
// 3. 诸葛亮  武力值: 30
@ObservedV2
class Hero {
  @Trace name: string
  @Trace attack: number
  constructor(name: string, attack: number) {
    this.name = name
    this.attack = attack
  }
}

@Entry
@ComponentV2
struct Demo03Observed {
  @Local heroList: Hero[] = [
    new Hero('赵云', 99),
    new Hero('关羽', 100),
    new Hero('诸葛亮', 30),
  ]
  build() {
    Column({ space: 10 }) {
      Text('英雄列表').fontSize(40)
      // 基于数组, 遍历渲染对象数组 item遍历的每一项对象
      ForEach(this.heroList, (item: Hero) => {
        // 组件外部, 往组件内部传值, 通过对象属性的方式传值
        HeroItem({
          item: item // 支持简写
        })
      })
    }
    .width('100%')
  }
}

@Component
struct HeroItem {
  item: Hero = new Hero('', 0)
  build() {
    Column() {
      Text(`姓名: ${this.item.name}`).fontSize(30)
      Text(`武力值: ${this.item.attack}`).fontSize(20)
      Button('练兵场+1').onClick(() => {
        this.item.attack++
      })
    }
    .padding(10)
    .width('80%')
    .height(150)
    .border({ width: 2 })
  }
}